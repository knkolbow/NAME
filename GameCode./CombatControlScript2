using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;
using System.Threading;

public class CombatControlScript : MonoBehaviour
{
    //create object and script variables
    GameObject enemyChar;
    GameObject playerChar;
    EnemyCharacter enemyscript;
    PlayerCharacter playerscript;
    public bool playerturn;
	public bool combatAI;
    
    // Start is called before the first frame update
    void Start()
    {
        //set object and script variables
        enemyChar = GameObject.FindGameObjectWithTag("EnemyChar");
        playerChar = GameObject.FindGameObjectWithTag("PlayerChar");
        playerscript = playerChar.GetComponent<PlayerCharacter>();
        enemyscript = enemyChar.GetComponent<EnemyCharacter>();
		//player = new PlayerCharacter(){};
		//enemy = new EnemyCharacter(){};
		//Public player PlayerCharacter();
		//Public enemy EnemyCharacter();
        //start with player turn
        playerturn = true;  
		combatAI = false;
    }

    // Update is called once per frame
    void Update()
    {
        //check if it is player or enemy turn
        //if enemy turn
        if (!playerturn)
        {
            //give player and enemy 1 mana
            playerscript.mana += 1;
            enemyscript.mana += 1;
            //need some way to pause actions here
            //currently enemy moves at a frame after the player, need a clear break, will look for fixes
            //checks if enemy has 10 or more mana
            
			//the enemy takes his turn
			enemyscript.enemyTakeTurn();
			
			

            //need some way to pause actions here
            //currently enemy moves at a frame after the player, need a clear break, will look for fixes
            playerturn = true;
        }
		//else if ((playerturn == true) && (combatAI == true))
		else if (combatAI == true)
		{
			playerscript.playerTakeTurn();
			Thread.Sleep(300);
		}
        //when player runs out of health goes back to main menu
        //plan to use a game over/save screen instead.
        if(playerscript.health <= 0)
        {
            SceneManager.LoadScene("MainMenu");
        }
    }
	
}
